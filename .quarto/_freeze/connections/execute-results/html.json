{
  "hash": "b62f8cc320965b34d1a4eeea7f1aa995",
  "result": {
    "markdown": "---\ntitle: \"user_study\"\nformat: html\neditor: visual\n---\n\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(foreach)\nlibrary(stringr)\nlibrary(dplyr)\nlibrary(tokenizers)\nlibrary(data.table)\nlibrary(ggplot2)\nlibrary(plyr)\nlibrary(quanteda)\nlibrary(purrr)\nlibrary(tidytext)\nlibrary(tm)\nlibrary(SnowballC)\nlibrary(Matrix)\nlibrary(text2vec)\nlibrary(tidyr)\nlibrary(janitor)\nlibrary(GGally)\nlibrary(formattable)\nlibrary(kableExtra)\nlibrary(FactoMineR)\nlibrary(psych)\nlibrary(factoextra)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read_excel(\"data/results-survey3.xlsx\")\ndata <- data[1:121] %>% \n  filter(.[[18]] !='Yes') # not analysed any EEG method\n```\n:::\n\n\n\n## In search of single variable representing experience\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nm = FAMD(exp_data[1:5], ncp=2, axes=c(1,2))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: ggrepel: 173 unlabeled data points (too many overlaps). Consider\nincreasing max.overlaps\n```\n:::\n\n::: {.cell-output-display}\n![](connections_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: ggrepel: 173 unlabeled data points (too many overlaps). Consider\nincreasing max.overlaps\n```\n:::\n\n::: {.cell-output-display}\n![](connections_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](connections_files/figure-html/unnamed-chunk-4-3.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](connections_files/figure-html/unnamed-chunk-4-4.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](connections_files/figure-html/unnamed-chunk-4-5.png){width=672}\n:::\n\n```{.r .cell-code}\nfviz_famd_ind(m, col.ind = \"cos2\", \n             gradient.cols = c(\"#00AFBB\", \"#E7B800\", \"#FC4E07\"),\n             repel = TRUE)\n```\n\n::: {.cell-output-display}\n![](connections_files/figure-html/unnamed-chunk-4-6.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfactor_scores <- as.data.frame(m$ind$coord)\nhead(factor_scores)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       Dim.1      Dim.2\n1 -1.5303106 -0.1469071\n2 -0.8668375 -0.5862766\n3 -0.2361600 -1.4409580\n4  0.6099401 -0.9023251\n5  0.1887863  1.2908970\n6  0.9587131 -0.7597601\n```\n:::\n\n```{.r .cell-code}\ncbind(data[20], factor_scores[1])  %>% \n   rename_at(vars(colnames(.)), ~ c(\"years\", \"proxy\")) %>% \n  with(cor.test( proxy, years)) %>% \n  broom::tidy()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 8\n  estimate statistic  p.value parameter conf.low conf.high method        alter…¹\n     <dbl>     <dbl>    <dbl>     <int>    <dbl>     <dbl> <chr>         <chr>  \n1    0.617      10.7 5.08e-21       185    0.520     0.699 Pearson's pr… two.si…\n# … with abbreviated variable name ¹​alternative\n```\n:::\n\n```{.r .cell-code}\n  #lm(data=.,years ~ proxy) %>% summary(.)\n```\n:::\n\n\n## Up or down\n\n\n::: {.cell}\n\n:::\n\n## colorbars\n\n\n::: {.cell}\n\n:::\n\n\n\n## Experience \\ tools\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvec <- names(data[25:51]) %>% str_split_i(., \"\\\\? \\\\[\", 2) %>%  str_sub(., 1, -2)\n\nsoftware <- data[25:51] %>%\n    rename_at(vars(colnames(.)), ~ vec) %>% #mutate(`Custom scripts` = ifelse(Other == \"Custom scripts\", \"Yes\", `Custom scripts`)) %>% \n  dplyr::select(-Other) %>% \n  mutate_at(vars(vec[1:26]), function(., na.rm = FALSE) (x = ifelse(.==\"Yes\", 1, 0))) %>% \n  cbind(data[20], .) %>% dplyr::rename(years = !!names(.)[1]) %>% filter(years < 50) %>% \n  select_if(colSums(.) != 0)\n```\n:::\n\n\n\n\n#### Tools and year of experience\n\n\n::: {.cell}\n\n```{.r .cell-code}\na <- software  %>% \n  select_if(colSums(.) > 10) \n\nres <- a %>%  dplyr::select(years, BESA) %>% \n  group_by(BESA) %>% dplyr::summarise(mean(years)) %>% dplyr::rename(., Usage = BESA, BESA = `mean(years)`)\n\ncn <- colnames(a[3:length(a)])\nfor (i in 1:length(cn)){\n  tmp <- a %>%  dplyr::select(years, cn[i]) %>% \n  group_by_at(2) %>% dplyr::summarise( mean(years)) %>%  dplyr::select(-1)\n  colnames(tmp) <- cn[i] \n  res <- cbind(res, tmp) \n  #print(cn[i])\n}\n res %>% t()  %>%\n  row_to_names(row_number = 1) %>% data.frame() %>% dplyr::rename(., not_used = X0, used = X1) %>% \n  tibble::rownames_to_column(., \"software\") %>%  \n  dplyr::mutate(., not_used = round(not_used, 2), used = round(used, 2)) %>% \n  dplyr::mutate(., status = ifelse(not_used > used, \"younger\", \"older\")) %>% \n  mutate(status = cell_spec(status, color = ifelse(status == \"younger\", \"green\", \"black\")))   %>% \n  kable(escape = F, booktabs = T) %>% kable_styling(\"striped\", position = \"center\",) %>%\n   add_header_above(header = c(\" \" = 1, \"Years of user experience\" = 3))   %>%\n  kable_classic(full_width = T, html_font = \"Arial\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped lightable-classic\" style=\"margin-left: auto; margin-right: auto; font-family: Arial; margin-left: auto; margin-right: auto;\">\n <thead>\n<tr>\n<th style=\"empty-cells: hide;border-bottom:hidden;\" colspan=\"1\"></th>\n<th style=\"border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"3\"><div style=\"border-bottom: 1px solid #ddd; padding-bottom: 5px; \">Years of user experience</div></th>\n</tr>\n  <tr>\n   <th style=\"text-align:left;\"> software </th>\n   <th style=\"text-align:right;\"> not_used </th>\n   <th style=\"text-align:right;\"> used </th>\n   <th style=\"text-align:left;\"> status </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> BESA </td>\n   <td style=\"text-align:right;\"> 7.74 </td>\n   <td style=\"text-align:right;\"> 8.58 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: black !important;\">older</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Brainstorm </td>\n   <td style=\"text-align:right;\"> 7.64 </td>\n   <td style=\"text-align:right;\"> 8.53 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: black !important;\">older</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Brain Vision Analyser </td>\n   <td style=\"text-align:right;\"> 7.74 </td>\n   <td style=\"text-align:right;\"> 8.00 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: black !important;\">older</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> EEGLAB </td>\n   <td style=\"text-align:right;\"> 6.27 </td>\n   <td style=\"text-align:right;\"> 8.72 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: black !important;\">older</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ERPLAB </td>\n   <td style=\"text-align:right;\"> 7.46 </td>\n   <td style=\"text-align:right;\"> 9.08 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: black !important;\">older</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> FieldTrip </td>\n   <td style=\"text-align:right;\"> 7.51 </td>\n   <td style=\"text-align:right;\"> 8.11 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: black !important;\">older</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> LIMO </td>\n   <td style=\"text-align:right;\"> 7.57 </td>\n   <td style=\"text-align:right;\"> 10.50 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: black !important;\">older</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> MNE-Python </td>\n   <td style=\"text-align:right;\"> 8.22 </td>\n   <td style=\"text-align:right;\"> 7.19 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: green !important;\">younger</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> SPM </td>\n   <td style=\"text-align:right;\"> 7.71 </td>\n   <td style=\"text-align:right;\"> 8.58 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: black !important;\">older</span> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Custom scripts </td>\n   <td style=\"text-align:right;\"> 7.32 </td>\n   <td style=\"text-align:right;\"> 8.62 </td>\n   <td style=\"text-align:left;\"> <span style=\"     color: black !important;\">older</span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# na.omit(data[51]) %>% nrow() # change others here \n# other <- c(rep(\"Custom scripts\", each=9), \"4DBTi\", rep(\"letswave\", 3), \"mTRF\", \"RAGU\", \"IGOR Pro\", \"EEGProcessor\", \"ELAN\", \"WinEEG\") %>% table(.) %>% data.frame(.) %>% rename_at(vars(colnames(.)), ~ c(\"soft\", \"sum_scores\"))\n# data.frame(rowSums(t(software))) %>%  tibble::rownames_to_column(., \"soft\") %>% \n#   rename_at(vars(colnames(.)), ~ c(\"soft\", \"sum_scores\")) %>% \n#  rbind(., other) %>% dplyr::group_by(soft) %>% dplyr::summarise(sum_scores = sum(sum_scores)) \n```\n:::\n\n\n## Number of used software\n\n#### and years of experience\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvec <- names(data[25:50]) %>% str_split_i(., \"\\\\? \\\\[\", 2) %>%  str_sub(., 1, -2)\n\nsoftware <- data[25:50] %>%\n    rename_at(vars(colnames(.)), ~ vec) %>% \n  mutate_at(vars(vec), function(., na.rm = FALSE) (x = ifelse(.==\"Yes\", 1, 0))) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Using an external vector in selections was deprecated in tidyselect 1.1.0.\nℹ Please use `all_of()` or `any_of()` instead.\n  # Was:\n  data %>% select(vec)\n\n  # Now:\n  data %>% select(all_of(vec))\n\nSee <https://tidyselect.r-lib.org/reference/faq-external-vector.html>.\n```\n:::\n\n```{.r .cell-code}\nny <- cbind(data.frame(rowSums(software)), data[20]) %>% \n   rename_at(vars(colnames(.)), ~ c(\"n_soft\", \"years\")) %>% filter(years < 50, n_soft != 0)  %>% data.frame()\n\nny %>% \n  lm(data=., n_soft ~ years) %>% summary(.)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = n_soft ~ years, data = .)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-4.0538 -1.2453 -0.2453  0.8452  7.3026 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  2.34098    0.21896   10.69  < 2e-16 ***\nyears        0.09043    0.02307    3.92 0.000125 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.754 on 181 degrees of freedom\nMultiple R-squared:  0.07827,\tAdjusted R-squared:  0.07317 \nF-statistic: 15.37 on 1 and 181 DF,  p-value: 0.0001253\n```\n:::\n\n```{.r .cell-code}\nny %>% ggplot(., aes(x=n_soft, y=years)) + geom_jitter() + geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](connections_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n#### and self assessment\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmerge(data.frame(rowSums(software)), data[21]) %>% \n   rename_at(vars(colnames(.)), ~ c(\"n_soft\", \"selfass\")) %>% \n  #lm(data=., n_soft ~ selfass) %>% summary(.)\n  ggplot(., aes(y=n_soft, x=selfass)) + geom_violin()\n```\n\n::: {.cell-output-display}\n![](connections_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n\n\n\n<!-- ```{r} -->\n<!-- ggpairs(exp_data[1:2])  -->\n<!-- ``` -->\n\n<!-- ```{r} -->\n<!-- ggpairs(exp_data[4:5])  -->\n<!-- ``` -->\n\n<!-- ```{r} -->\n<!-- ggpairs(exp_data[3:5])  -->\n<!-- ``` -->\n\n<!-- ```{r} -->\n<!-- ggpairs(exp_data)  -->\n<!-- ``` -->\n",
    "supporting": [
      "connections_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}